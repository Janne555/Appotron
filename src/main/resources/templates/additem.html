<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

    <head th:include="fragments :: head">
    </head>
    <head>
        <script>
            /*<![CDATA[*/
            $(document).on("keypress", "form", function(event) { 
                return event.keyCode != 13;
            });

            $(document).ready(function(){
                $("#scanbutton").click(function(){
                    var name = $("#name").val();
                    // console.log(encodeURIComponent(window.location.href));
                    var url = "http://zxing.appspot.com/scan?ret=" + encodeURIComponent(window.location.href) + "%3Fserial%3D%7BCODE%7D%26name%3D" + encodeURIComponent(name) + "&SCAN_FORMATS=UPC_A,EAN_13";
                    window.location.href = url;
            })});

            // $(document).ready(function(){
            //     $("#typechooser").change(function(){
            //         var val = $("#typechooser").val();
            //         if (val == "foodstuff") {
            //             $("#datepicker").show();
            //         } else {
            //             $("#datepicker").hide();
            //         }
            // })});
            /*]]>*/

        </script>
    </head>
    <body>
    <div th:replace="fragments :: navigation">
    </div>
    <div class="w3-main">
    <div class="w3-col m6 l4 w3-card-4 w3-margin">
        <form class="w3-container" action="/additem.post" method="post">
            <div class="w3-container w3-green">
                <h2>Basic Info</h2>
            </div>
            <label class="w3-label" for="typechooser">Type:</label>
            <select class="w3-select" name="type" id="typechooser" required="true">
                <option value="" disabled="true" selected="true">Choose type</option>
                <option value="book">Book</option>
                <option value="foodstuff">Foodstuff</option>
                <option value="item">Item</option>
            </select><br/>
            <label class="w3-label" for="name">Name:</label>
            <input class="w3-input" type="text" name="name" required="true" id="name" th:value="${namefield}" /><br/>
            <label class="w3-label" for="location">Location:</label>
            <input class="w3-input" list="locationslist" required="true" name="location" id="location" />
            <datalist id="locationslist">    
                <option th:each="location: ${locations}" th:value="${location}" />
            </datalist>
            <br/>
            <label class="w3-label" for="identifier">Identifier or Serial Number</label>
            <input class="w3-input" type="text" name="identifier" required="true" id="identifier" th:value="${identifier}"/>
            <span>Expiration Date:</span><br/>
            <input class="w3-input" type="date" name="expiration" /><br/>
            <input class="w3-button w3-block w3-teal" type="submit" name="submit" value="Submit" /> <br />
            <input class="w3-button w3-block w3-teal" type="reset" name="reset" value="Reset" /> <br />
        </form>
    </div>
    </div>
    </body>
</html>